<div class="container">
  <h1>all Clinics in system</h1>
  <div class="add-user">
    <div class="add-clinic">
      <button type="button" class="btn btn-success" (click)="openPopup()">
        Add Clinic
      </button>
    </div>
    <div class="search">
      <form class="example-form">
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Enter Clinic Name</mat-label>
          <input
            type="search"
            placeholder="Search Clinic"
            aria-label="Enter Clinic Name"
            matInput
            [matAutocomplete]="auto"
          />
          <!-- [formControl]="sreachControl" -->
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let option of result"
              [value]="option.title"
              (click)="searchClinic(option)"
            >
              {{ option.title }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </form>
    </div>
  </div>

  <ng-container *ngIf="isShowData; else nodata">
    <div class="mat-elevation-z8">
      <div class="over">
        <table mat-table [dataSource]="dataSource">
          <!-- <ng-container matColumnDef="index">
         <th mat-header-cell *matHeaderCellDef>No.</th>
        <td mat-cell *matCellDef="let element">{{element|json}}</td>
      </ng-container> -->

          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Title</th>
            <td mat-cell *matCellDef="let element">{{ element.title }}</td>
          </ng-container>

          <ng-container matColumnDef="city">
            <th mat-header-cell *matHeaderCellDef>City</th>
            <td mat-cell *matCellDef="let element">{{ element.city }}</td>
          </ng-container>

          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef>Address</th>
            <td mat-cell *matCellDef="let element">{{ element.address }}</td>
          </ng-container>

          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>Delete</th>
            <td mat-cell *matCellDef="let element">
              <button mat-raised-button color="warn" (click)="deleteClinic(element)">Delete</button>
            </td>
          </ng-container>

          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef>Edit</th>
            <td mat-cell *matCellDef="let element">
              <button
                mat-raised-button
                color="primary"
                (click)="editPopup(element)"
              >
                Edit
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
      <ng-container *ngIf="result.length >= 6">
        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          aria-label="Select page of periodic elements"
        >
        </mat-paginator>
      </ng-container>
    </div>
  </ng-container>

  <ng-template #nodata>
    <div style="text-align: center" class="alert alert-danger">
      No data To Show
    </div>
  </ng-template>
</div>

<div class="popup" *ngIf="isOpenPopup" @popupParent>
  <div class="overlay">
    <h1>{{ message }}</h1>

    <form class="example-form" [formGroup]="clinicForm">
      <mat-form-field class="example-full-width" @popupChildLeft>
        <mat-label>title</mat-label>
        <input matInput placeholder="title" formControlName="title" />
        <mat-icon
          class="icon-color"
          matSuffix
          style="color: red"
          *ngIf="title?.invalid"
          >sentiment_very_dissatisfied</mat-icon
        >

        <mat-icon class="icon-color" matSuffix *ngIf="title?.valid"
          >sentiment_very_satisfied</mat-icon
        >
        <mat-error *ngIf="title?.invalid && title?.touched && title?.dirty">
          This field is Required
        </mat-error>
      </mat-form-field>

      <mat-form-field class="example-full-width" @popupChildRight>
        <mat-label>address</mat-label>
        <input matInput placeholder="address" formControlName="address" />
        <mat-icon
          class="icon-color"
          matSuffix
          style="color: red"
          *ngIf="address?.invalid"
          >sentiment_very_dissatisfied</mat-icon
        >

        <mat-icon class="icon-color" matSuffix *ngIf="address?.valid"
          >sentiment_very_satisfied</mat-icon
        >
        <mat-error
          *ngIf="address?.invalid && address?.touched && address?.dirty"
        >
          This field is Required
        </mat-error>
      </mat-form-field>

      <mat-form-field class="example-full-width" @popupChildLeft>
        <mat-label>city</mat-label>
        <input matInput placeholder="city" formControlName="city" />
        <mat-icon
          class="icon-color"
          matSuffix
          style="color: red"
          *ngIf="city?.invalid"
          >sentiment_very_dissatisfied</mat-icon
        >

        <mat-icon class="icon-color" matSuffix *ngIf="city?.valid"
          >sentiment_very_satisfied</mat-icon
        >
        <mat-error *ngIf="city?.invalid && city?.touched && city?.dirty">
          This field is Required
        </mat-error>
      </mat-form-field>
    </form>

    <div class="buttons">
      <button
        *ngIf="AddCheck; else edit"
        type="button"
        class="btn btn-success"
        [disabled]="clinicForm.status == 'INVALID'"
        (click)="addClinic()"
      >
        Add Clinic
      </button>
      <ng-template #edit>
        <button mat-raised-button color="primary" (click)="editClinic()">
          Edit Clinic
        </button>
      </ng-template>
      <button
        type="button"
        class="btn btn-success"
        (click)="isOpenPopup = false"
      >
        Cancel
      </button>
    </div>
  </div>
</div>



<div class="success">
  <ng-container *ngIf="success == 'delete'">
    <div class="alert alert-success" @translate>
      the Data Deleted Successfully
    </div>
  </ng-container>
  
  <ng-container *ngIf="success == 'edit'">
    <div class="alert alert-success" @translate>
      the Data updated successfully
    </div>
  </ng-container>

  <ng-container *ngIf="success == 'add'">
    <div class="alert alert-success" @translate>
      the Data added successfully
    </div>
  </ng-container>


  <ng-container *ngIf="wrong == 'errorEdit' ">
    <div class="alert alert-danger" @translate>the Data updated wrong</div>
  </ng-container>

  <ng-container *ngIf="wrong =='errorDelete'">
    <div class="alert alert-danger" @translate>the Data Deleted wrong</div>
  </ng-container>

  <ng-container *ngIf="wrong =='errorAdd'">
    <div class="alert alert-danger" @translate>the Data Add wrong</div>
  </ng-container>
</div>
